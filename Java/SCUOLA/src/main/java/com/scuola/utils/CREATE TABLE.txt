USE SCUOLA; -- DEFINISCO IL NOME DEL DB DA USARE

CREATE TABLE SCUOLA
(
    CODICE_MECCANOGRAFICO VARCHAR(50) PRIMARY KEY,
    NOME_SCUOLA VARCHAR(50) NOT NULL,
    INDIRIZZO_SCUOLA VARCHAR(100) NOT NULL,
    TIPOLOGIA_ISTITUTO VARCHAR(30) NOT NULL,
    NUMERO_TELEFONO VARCHAR(15) UNIQUE NOT NULL
);

CREATE TABLE STUDENTE
(
    MATRICOLA_STUDENTE VARCHAR(10) PRIMARY KEY,
    NOME_STUDENTE VARCHAR(25) NOT NULL,
    COGNOME_STUDENTE VARCHAR(25) NOT NULL,
    CF_STUDENTE VARCHAR(16) UNIQUE NOT NULL,
    CELLULARE_STUDENTE VARCHAR(15) UNIQUE NOT NULL
);

CREATE TABLE STUDENTE_FREQUENTA_SCUOLA
(
    MATRICOLA_STUDENTE VARCHAR(10) NOT NULL, -- PK DI STUDENTE
    CODICE_MECCANOGRAFICO VARCHAR(50) NOT NULL, -- PK DI SCUOLA
    DATA_ISCRIZIONE VARCHAR(10) NOT NULL,
    PRIMARY KEY(MATRICOLA_STUDENTE,CODICE_MECCANOGRAFICO), -- PK COMPOSTA
    
    -- FK STUDENTE
    CONSTRAINT MATRICOLA_STUDENTE_FK FOREIGN KEY (MATRICOLA_STUDENTE)
    REFERENCES STUDENTE(MATRICOLA_STUDENTE) ON UPDATE CASCADE, 
    -- FK SCUOLA
    CONSTRAINT CODICE_MECCANOGRAFICO_FK FOREIGN KEY (CODICE_MECCANOGRAFICO)
    REFERENCES SCUOLA(CODICE_MECCANOGRAFICO) ON UPDATE CASCADE
);
